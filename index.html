<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lanna Veg ‚Äì ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏±‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><path fill='%233fa65c' d='M32 2C15 2 2 15 2 32s13 30 30 30 30-13 30-30S49 2 32 2zm1 8c7 1 12 5 15 10s4 11 3 18c-1 7-4 13-9 17-5 3-12 4-18 2 2-3 3-7 4-10s1-6 1-9c0-5-1-10-3-14s-5-8-9-11c4-2 10-4 16-3z'/></svg>">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    body,html{margin:0;height:100%;font-family:'Noto Sans Thai',sans-serif;background:#f7fdf9;color:#2f3b2f;}
    #app{display:flex;height:100%;}
    #sidebar{width:320px;background:#fff;border-right:1px solid #d8e9d9;display:flex;flex-direction:column;}
    header{text-align:center;padding:1rem;border-bottom:1px solid #d8e9d9;}
    header h1{color:#3fa65c;margin:.3rem 0;}
    nav{padding:1rem;display:flex;flex-direction:column;gap:.6rem;}
    .btn{background:#3fa65c;color:#fff;border:none;padding:.7rem;border-radius:6px;cursor:pointer;}
    .btn:hover{background:#79c48c;}
    select,input,textarea{width:100%;padding:.5rem;margin-top:.3rem;border:1px solid #d8e9d9;border-radius:4px;}
    #content{flex:1;padding:1rem;overflow:auto;}
    #map{flex:1;height:100%;}
    @media(max-width:768px){#app{flex-direction:column}#sidebar{width:100%;border-right:none;border-bottom:1px solid #d8e9d9;height:auto}#map{height:60vh}}
  </style>
</head>
<body>
<div id="app">
  <div id="sidebar">
    <header>
      <h1>Lanna Veg</h1>
      <p>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏±‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠</p>
    </header>
    <nav>
      <button class="btn" id="btnList">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏±‡∏Å</button>
      <button class="btn" id="btnAdd">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
      <button class="btn" id="btnScan">‡∏™‡πÅ‡∏Å‡∏ô‡∏†‡∏≤‡∏û‡∏ú‡∏±‡∏Å</button>
      <select id="lang">
        <option value="th" selected>‡πÑ‡∏ó‡∏¢</option>
        <option value="en">English</option>
      </select>
    </nav>
    <div id="content">
      <h3>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà Lanna Veg üåø</h3>
      <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏±‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πÅ‡∏Å‡∏ô‡∏†‡∏≤‡∏û‡∏ú‡∏±‡∏Å‡∏î‡πâ‡∏ß‡∏¢ AI</p>
    </div>
  </div>
  <div id="map"></div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const vegetables=[
  {th:"‡∏™‡∏∞‡πÅ‡∏•",en:"Salae"},
  {th:"‡∏™‡∏∞‡πÄ‡∏î‡∏≤",en:"Neem"},
  {th:"‡∏ú‡∏±‡∏Å‡∏Ñ‡∏£‡∏≤‡∏î‡∏´‡∏±‡∏ß‡πÅ‡∏´‡∏ß‡∏ô",en:"Toothache Plant"},
  {th:"‡∏î‡∏≠‡∏Å‡∏Ç‡πà‡∏≤",en:"Galangal Flower"},
  {th:"‡∏î‡∏µ‡∏õ‡∏•‡∏µ",en:"Long Pepper"}
];
let lang="th";
let map=L.map('map').setView([18.7883,98.9853],7);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:'¬© OpenStreetMap contributors'
}).addTo(map);

const saved=JSON.parse(localStorage.getItem("lannaVegMarkers")||"[]");
saved.forEach(m=>{
  L.marker(m.latlng).addTo(map).bindPopup(`<b>${m.place}</b><br>${m.veg}<br>${m.text}`);
});

const content=document.getElementById('content');

document.getElementById('btnList').onclick=()=>{
  content.innerHTML=`<h3>${lang==="th"?"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏±‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô":"Local Vegetables"}</h3><ul>`+
  vegetables.map(v=>`<li>${v[lang]}</li>`).join('')+"</ul>";
};

document.getElementById('btnAdd').onclick=()=>{
  content.innerHTML=`
  <h3>${lang==="th"?"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß":"Add Review"}</h3>
  <label>${lang==="th"?"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏±‡∏Å:":"Vegetable:"}</label>
  <select id="vSel">${vegetables.map(v=>`<option>${v[lang]}</option>`).join('')}</select>
  <label>${lang==="th"?"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà:":"Place:"}</label>
  <input id="vPlace" placeholder="${lang==="th"?"‡∏ï‡∏•‡∏≤‡∏î / ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£...":"Market / restaurant..."}">
  <label>${lang==="th"?"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô:":"Comment:"}</label>
  <textarea id="vText" rows="3"></textarea>
  <button class="btn" id="saveBtn">${lang==="th"?"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏õ‡∏±‡∏Å‡∏´‡∏°‡∏∏‡∏î":"Save & Pin"}</button>`;
  document.getElementById('saveBtn').onclick=()=>{
    alert(lang==="th"?"‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏Å‡∏´‡∏°‡∏∏‡∏î!":"Click on the map to pin!");
    map.once('click',e=>{
      const data={
        veg:document.getElementById('vSel').value,
        place:document.getElementById('vPlace').value||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",
        text:document.getElementById('vText').value,
        latlng:e.latlng
      };
      saved.push(data);
      localStorage.setItem("lannaVegMarkers",JSON.stringify(saved));
      L.marker(e.latlng).addTo(map).bindPopup(`<b>${data.place}</b><br>${data.veg}<br>${data.text}`);
      content.innerHTML=`<p>${lang==="th"?"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!":"Saved successfully!"}</p>`;
    });
  };
};

document.getElementById('btnScan').onclick=()=>{
  content.innerHTML=`
    <h3>${lang==="th"?"‡∏™‡πÅ‡∏Å‡∏ô‡∏†‡∏≤‡∏û‡∏ú‡∏±‡∏Å (‡πÇ‡∏´‡∏°‡∏î‡∏™‡∏≤‡∏ò‡∏¥‡∏ï)": "Scan Vegetable (Demo)"}</h3>
    <input type="file" id="scanInput" accept="image/*">
    <div id="scanResult" style="margin-top:1rem;font-weight:bold;"></div>`;
  document.getElementById('scanInput').onchange=()=>{
    const rand=vegetables[Math.floor(Math.random()*vegetables.length)];
    document.getElementById('scanResult').textContent=`${lang==="th"?"AI ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô: ":"AI predicts: "}${rand[lang]}`;
  };
};

document.getElementById('lang').onchange=e=>{
  lang=e.target.value;
  alert(lang==="th"?"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡πâ‡∏ß":"Language set to English");
};
</script>
</body>
</html>
