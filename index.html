<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lanna Veg ‚Äì ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏±‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 64 64%22><path fill='%233fa65c' d='M32 2C15 2 2 15 2 32s13 30 30 30 30-13 30-30S49 2 32 2zm1 8c7 1 12 5 15 10s4 11 3 18c-1 7-4 13-9 17-5 3-12 4-18 2 2-3 3-7 4-10s1-6 1-9c0-5-1-10-3-14s-5-8-9-11c4-2 10-4 16-3z'/></svg>">
  <style>
    :root {
      --primary-green: #3fa65c;
      --accent-green: #79c48c;
      --light-bg: #f7fdf9;
      --dark-text: #2f3b2f;
      --border-color: #d8e9d9;
      font-family: 'Noto Sans Thai', 'Kanit', sans-serif;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body, html { width: 100%; height: 100%; background: var(--light-bg); color: var(--dark-text); overflow: hidden; }
    #app-container { display: flex; height: 100vh; width: 100%; }
    #sidebar {
      width: 320px; background: #fff; border-right: 1px solid var(--border-color);
      display: flex; flex-direction: column; justify-content: space-between; overflow-y: auto;
    }
    #sidebar header { text-align: center; padding: 1.5rem 1rem; border-bottom: 1px solid var(--border-color); }
    #sidebar header h1 { font-size: 1.4rem; color: var(--primary-green); margin-bottom: 0.25rem; }
    #sidebar header p { font-size: 0.9rem; color: #666; }
    nav { display: flex; flex-direction: column; padding: 1rem; gap: 0.6rem; }
    .nav-btn {
      padding: 0.8rem; background: var(--primary-green); color: #fff;
      border: none; border-radius: 6px; cursor: pointer; font-weight: 500; transition: 0.3s ease;
    }
    .nav-btn:hover { background: var(--accent-green); }
    #lang-switcher { padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 4px; }
    #panel-content { flex: 1; padding: 1rem; overflow-y: auto; }
    footer { text-align: center; font-size: 0.8rem; padding: 1rem; border-top: 1px solid var(--border-color); color: #777; }
    #map-container { flex: 1; position: relative; }
    #map { width: 100%; height: 100%; }
    @media (max-width: 768px) {
      #sidebar { width: 100%; height: auto; border-right: none; border-bottom: 1px solid var(--border-color); }
      #app-container { flex-direction: column; }
      #map-container { height: calc(100vh - 400px); }
    }
    input, select, textarea { width: 100%; margin-top: 0.3rem; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 5px; }
    button.submit-btn { margin-top: 0.8rem; background: var(--primary-green); color: white; border: none; padding: 0.7rem; border-radius: 5px; cursor: pointer; }
    button.submit-btn:hover { background: var(--accent-green); }
  </style>
</head>

<body>
  <div id="app-container">
    <aside id="sidebar">
      <header>
        <h1>Lanna Veg</h1>
        <p>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏±‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠</p>
      </header>
      <nav>
        <button id="btn-veg-list" class="nav-btn">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏±‡∏Å</button>
        <button id="btn-add-review" class="nav-btn">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
        <button id="btn-scan" class="nav-btn">‡∏™‡πÅ‡∏Å‡∏ô‡∏†‡∏≤‡∏û‡∏ú‡∏±‡∏Å</button>
        <select id="lang-switcher">
          <option value="th" selected>‡πÑ‡∏ó‡∏¢</option>
          <option value="en">English</option>
        </select>
      </nav>
      <section id="panel-content">
        <h3>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà Lanna Veg üåø</h3>
        <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏±‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏†‡∏≤‡∏û‡∏ú‡∏±‡∏Å‡∏î‡πâ‡∏ß‡∏¢ AI</p>
      </section>
      <footer>¬© 2025 Lanna Veg Prototype</footer>
    </aside>

    <main id="map-container">
      <div id="map"></div>
    </main>
  </div>

  <script>
    let map;
    const markers = JSON.parse(localStorage.getItem("lannaVegMarkers") || "[]");
    const vegetables = [
      { key: "salae", name_th: "‡∏™‡∏∞‡πÅ‡∏•", name_en: "Salae" },
      { key: "sadao", name_th: "‡∏™‡∏∞‡πÄ‡∏î‡∏≤", name_en: "Neem" },
      { key: "pak_krad", name_th: "‡∏ú‡∏±‡∏Å‡∏Ñ‡∏£‡∏≤‡∏î‡∏´‡∏±‡∏ß‡πÅ‡∏´‡∏ß‡∏ô", name_en: "Toothache plant" },
      { key: "dok_kha", name_th: "‡∏î‡∏≠‡∏Å‡∏Ç‡πà‡∏≤", name_en: "Galangal flower" },
      { key: "deeplee", name_th: "‡∏î‡∏µ‡∏õ‡∏•‡∏µ", name_en: "Long pepper" },
    ];

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 18.7883, lng: 98.9853 },
        zoom: 7,
        mapTypeControl: false,
      });
      renderMarkers();
    }

    function renderMarkers() {
      markers.forEach(m => {
        const marker = new google.maps.Marker({ position: m.position, map, title: m.place });
        const info = new google.maps.InfoWindow({
          content: `<strong>${m.place}</strong><br>‡∏ú‡∏±‡∏Å: ${m.veg}<br>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô: ${m.text}<br><small>${new Date(m.date).toLocaleString("th-TH")}</small>`
        });
        marker.addListener("click", () => info.open(map, marker));
      });
    }

    function addMarker(data) {
      markers.push(data);
      localStorage.setItem("lannaVegMarkers", JSON.stringify(markers));
      renderMarkers();
    }

    const content = document.getElementById("panel-content");
    const langSel = document.getElementById("lang-switcher");
    let lang = "th";

    document.getElementById("btn-veg-list").onclick = () => showVegList();
    document.getElementById("btn-add-review").onclick = () => showReviewForm();
    document.getElementById("btn-scan").onclick = () => showScanPage();

    langSel.onchange = () => {
      lang = langSel.value;
      alert(lang === "th" ? "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡πâ‡∏ß" : "Language changed to English");
    };

    function showVegList() {
      content.innerHTML = `<h3>${lang === "th" ? "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏±‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô" : "Local Vegetables"}</h3><ul>${vegetables.map(v => `<li>${lang === "th" ? v.name_th : v.name_en}</li>`).join("")}</ul>`;
    }

    function showReviewForm() {
      content.innerHTML = `
        <h3>${lang === "th" ? "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß" : "Add Review"}</h3>
        <label>${lang === "th" ? "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏±‡∏Å:" : "Vegetable:"}</label>
        <select id="revVeg">${vegetables.map(v => `<option>${lang === "th" ? v.name_th : v.name_en}</option>`).join("")}</select>
        <label>${lang === "th" ? "‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà:" : "Place:"}</label>
        <input id="revPlace" placeholder="${lang === "th" ? "‡∏ï‡∏•‡∏≤‡∏î, ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£..." : "Market, restaurant..."}">
        <label>${lang === "th" ? "‡∏£‡∏µ‡∏ß‡∏¥‡∏ß / ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡πá‡∏ô:" : "Review / Comment:"}</label>
        <textarea id="revText" rows="3"></textarea>
        <button class="submit-btn" onclick="saveReview()">${lang === "th" ? "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏õ‡∏±‡∏Å‡∏´‡∏°‡∏∏‡∏î" : "Save & Pin"}</button>
      `;
    }

    function saveReview() {
      alert(lang === "th" ? "‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏Å‡∏´‡∏°‡∏∏‡∏î!" : "Click on the map to set a pin!");
      map.addListener("click", function handler(e) {
        const data = {
          veg: document.getElementById("revVeg").value,
          place: document.getElementById("revPlace").value || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠",
          text: document.getElementById("revText").value,
          position: { lat: e.latLng.lat(), lng: e.latLng.lng() },
          date: Date.now(),
        };
        addMarker(data);
        google.maps.event.removeListener(handler);
        content.innerHTML = `<p>${lang === "th" ? "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!" : "Review saved successfully!"}</p>`;
      });
    }

    function showScanPage() {
      content.innerHTML = `
        <h3>${lang === "th" ? "‡∏™‡πÅ‡∏Å‡∏ô‡∏†‡∏≤‡∏û‡∏ú‡∏±‡∏Å (‡πÇ‡∏´‡∏°‡∏î‡∏™‡∏≤‡∏ò‡∏¥‡∏ï)" : "Scan Vegetable (Demo)"}</h3>
        <input type="file" id="scanInput" accept="image/*">
        <p style="margin-top:0.5rem;">${lang === "th" ? "‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏∞‡∏™‡∏∏‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏ú‡∏±‡∏Å‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö" : "Result is randomly chosen from the vegetable list."}</p>
        <div id="scanResult" style="margin-top:1rem;font-weight:bold;"></div>
      `;
      document.getElementById("scanInput").onchange = e => {
        const randomVeg = vegetables[Math.floor(Math.random() * vegetables.length)];
        document.getElementById("scanResult").textContent =
          `${lang === "th" ? "AI ‡πÄ‡∏î‡∏≤‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô:" : "AI predicts:"} ${lang === "th" ? randomVeg.name_th : randomVeg.name_en}`;
      };
    }
  </script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY_HERE&callback=initMap"></script>
</body>
</html>
